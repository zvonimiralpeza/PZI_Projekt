import{az as W,A,I as Z,C as $,D as G,aA as J,ac as X,aW as Y,aX as H,ae as K,a6 as Q,E as ee,a7 as ae,F as I,G as F,J as V,a8 as te,aj as le,Z as se,aB as oe,ak as ne,aY as re,aZ as ie,al as ue,a0 as ce,N as de,ah as me,b as a,ap as ve,X as fe,ar as S,z as _,S as P,r as pe,aM as ye,j as D,O as ge,a3 as Ve,aG as be,_ as ke,aR as he,c as Se,w as o,V as _e,aT as Pe,o as j,x as Ce,s as xe,d as y,y as Te,q as De,t as je,aV as Be,a as Ee}from"./entry.bcefcb11.js";import{m as we,u as Oe,a as B}from"./VOverlay.f9cdbb3b.js";import{f as ze,V as E}from"./VTextField.33b3bea0.js";import{V as Ae}from"./dialog-transition.5143d28d.js";import{V as w,b as O,a as z,e as Ie}from"./VCard.2cadbc38.js";import{V as Fe}from"./VForm.8feb3687.js";const Re=W("v-alert-title"),Le=["success","info","warning","error"],Ue=A({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Z,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Le.includes(e)},...$(),...G(),...J(),...X(),...Y(),...H(),...K(),...Q(),...ee(),...ae({variant:"flat"})},"VAlert"),Ne=I()({name:"VAlert",props:Ue(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{emit:m,slots:t}=i;const s=F(e,"modelValue"),l=V(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),u=V(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:b}=te(e),{colorClasses:c,colorStyles:n,variantClasses:r}=le(u),{densityClasses:d}=se(e),{dimensionStyles:v}=oe(e),{elevationClasses:f}=ne(e),{locationStyles:g}=re(e),{positionClasses:k}=ie(e),{roundedClasses:R}=ue(e),{textColorClasses:L,textColorStyles:U}=ce(de(e,"borderColor")),{t:N}=me(),C=V(()=>({"aria-label":N(e.closeLabel),onClick(h){s.value=!1,m("click:close",h)}}));return()=>{const h=!!(t.prepend||l.value),M=!!(t.title||e.title),q=!!(t.close||e.closable);return s.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},b.value,c.value,d.value,f.value,k.value,R.value,r.value,e.class],style:[n.value,v.value,g.value,e.style],role:"alert"},{default:()=>{var x,T;return[ve(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",L.value],style:U.value},null),h&&a("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?a(S,{key:"prepend-defaults",disabled:!l.value,defaults:{VIcon:{density:e.density,icon:l.value,size:e.prominent?44:28}}},t.prepend):a(fe,{key:"prepend-icon",density:e.density,icon:l.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[M&&a(Re,{key:"title"},{default:()=>{var p;return[((p=t.title)==null?void 0:p.call(t))??e.title]}}),((x=t.text)==null?void 0:x.call(t))??e.text,(T=t.default)==null?void 0:T.call(t)]),t.append&&a("div",{key:"append",class:"v-alert__append"},[t.append()]),q&&a("div",{key:"close",class:"v-alert__close"},[t.close?a(S,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var p;return[(p=t.close)==null?void 0:p.call(t,{props:C.value})]}}):a(_,P({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},C.value),null)])]}})}}});const Me=A({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...we({origin:"center center",scrollStrategy:"block",transition:{component:Ae},zIndex:2400})},"VDialog"),qe=I()({name:"VDialog",props:Me(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:m}=i;const t=F(e,"modelValue"),{scopeId:s}=Oe(),l=pe();function u(c){var d,v;const n=c.relatedTarget,r=c.target;if(n!==r&&((d=l.value)!=null&&d.contentEl)&&((v=l.value)!=null&&v.globalTop)&&![document,l.value.contentEl].includes(r)&&!l.value.contentEl.contains(r)){const f=be(l.value.contentEl);if(!f.length)return;const g=f[0],k=f[f.length-1];n===g?k.focus():g.focus()}}ye&&D(()=>t.value&&e.retainFocus,c=>{c?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0}),D(t,async c=>{var n,r;await Ve(),c?(n=l.value.contentEl)==null||n.focus({preventScroll:!0}):(r=l.value.activatorEl)==null||r.focus({preventScroll:!0})});const b=V(()=>P({"aria-haspopup":"dialog","aria-expanded":String(t.value)},e.activatorProps));return ge(()=>{const c=B.filterProps(e);return a(B,P({ref:l,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},c,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n,"aria-modal":"true",activatorProps:b.value,role:"dialog"},s),{activator:m.activator,default:function(){for(var n=arguments.length,r=new Array(n),d=0;d<n;d++)r[d]=arguments[d];return a(S,{root:"VDialog"},{default:()=>{var v;return[(v=m.default)==null?void 0:v.call(m,...r)]}})}})}),ze({},l)}}),We={data(){return{email:"",lozinka:"",message:"",alertType:"",isSuccessDialogOpen:!1}},methods:{async submitForm(){try{if(!this.email||!this.lozinka){this.message="Molimo unesite sve podatke.",this.alertType="error";return}const e=await $fetch(`${this.$config.public.BASE_URL}/login`,{method:"POST",body:{email:this.email,password:this.lozinka}});console.log(e),e.user?(this.message="Uspješno ste prijavljeni!",this.alertType="success",this.user=e.user,localStorage.setItem("user",JSON.stringify(e)),this.isSuccessDialogOpen=!0,setTimeout(()=>{this.$router.push("/")},2e3)):(this.message="Neuspješna prijava. Provjerite vaše podatke.",this.alertType="error")}catch(e){console.log(e),this.message="Došlo je do greške prilikom prijave. Pokušajte ponovo.",this.alertType="error"}},closeSuccessDialog(){this.isSuccessDialogOpen=!1}},computed:{...he(Pe,["user"])}},Ze=Ee("p",null,"Uspješno ste se prijavili!",-1);function $e(e,i,m,t,s,l){return j(),Se("div",null,[a(_e,null,{default:o(()=>[a(Ce,{justify:"center"},{default:o(()=>[a(xe,{cols:"12",sm:"8",md:"6"},{default:o(()=>[a(w,null,{default:o(()=>[a(O,{class:"text-h5 text-center",style:{color:"#2b9300"}},{default:o(()=>[y("Prijava")]),_:1}),a(z,null,{default:o(()=>[a(Fe,{onSubmit:Te(l.submitForm,["prevent"])},{default:o(()=>[a(E,{modelValue:s.email,"onUpdate:modelValue":i[0]||(i[0]=u=>s.email=u),label:"Email",required:"",persistent:""},null,8,["modelValue"]),a(E,{modelValue:s.lozinka,"onUpdate:modelValue":i[1]||(i[1]=u=>s.lozinka=u),label:"Lozinka",type:"password",required:"",persistent:"",autocomplete:"current-password"},null,8,["modelValue"]),a(_,{type:"submit",color:"green"},{default:o(()=>[y("Prijavi se")]),_:1})]),_:1},8,["onSubmit"]),s.message&&!s.isSuccessDialogOpen?(j(),De(Ne,{key:0,type:s.alertType,class:"mt-4"},{default:o(()=>[y(je(s.message),1)]),_:1},8,["type"])):Be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(qe,{modelValue:s.isSuccessDialogOpen,"onUpdate:modelValue":i[2]||(i[2]=u=>s.isSuccessDialogOpen=u),"max-width":"400px"},{default:o(()=>[a(w,null,{default:o(()=>[a(O,{class:"headline"},{default:o(()=>[y("Uspješno prijavljivanje")]),_:1}),a(z,null,{default:o(()=>[Ze]),_:1}),a(Ie,null,{default:o(()=>[a(_,{color:"green",text:"",onClick:l.closeSuccessDialog},{default:o(()=>[y("Zatvori")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Qe=ke(We,[["render",$e]]);export{Qe as default};
